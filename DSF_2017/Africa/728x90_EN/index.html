<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Banner</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.0/TweenMax.min.js"></script>
    <link rel="stylesheet" href="styles.css" />
    <script type="text/javascript">
	    var clickTag = '';

	    var images = [],
	    	i = 0,
	    	startTime = 0,
	    	duration = 0,
	    	lastLeft = 0,
	    	lastTop = 0;

	    var tl = new TimelineLite();

	    var LOOP_TIME = 0, // how many time the banner replays
	        loop = 0,
	        isReplay = true; // show/hide replay button in the end

	    function init() {

	    	for (i=1; i<=23; i++) {
	    		images[i-1] = document.getElementById('img'+i);

	    		images[i-1].style.left = Math.round(Math.random()*200 - 100) + "px";
	    		images[i-1].style.top = Math.round(Math.random()*100 - 30) + "px";
	    	}

	    	tl.to(text1, 0.5, {autoAlpha: 1, ease: Power3.easeInOut})
	    		.to(text1, 0.5, {autoAlpha: 0, delay: 2, ease: Power3.easeInOut})
	    		.to(text2, 0.5, {autoAlpha: 1, left: 0, ease: Power3.easeInOut})
	    		.to(text2, 0.5, {autoAlpha: 0, delay: 2, ease: Power3.easeInOut})
	    		.to(mask, 0.5, {autoAlpha: 1, ease: Power3.easeInOut})
	    		.to(logo, 0.5, {autoAlpha: 1, ease: Power3.easeInOut})
	    		.to(text3, 0.5, {autoAlpha: 1, ease: Power3.easeInOut, onComplete:onLoop});


	    	for (i=0; i<images.length; i++) {
	    		duration = Math.random() + 2.5;
	    		startTime = Math.random()*1.5 + 3.5;

	    		lastLeft = Math.random()*500 + 728;
	    		lastTop = Math.round(Math.random()*100 + 30);

	    		tl.to(images[i], 0.5, {autoAlpha:1, scale:1}, startTime)
	    			.to(images[i], duration, {top:lastTop, left:lastLeft, rotation:360, ease: Power0.easeInOut}, startTime);
	    	}
	    }

	    function restart() {
	        tl.restart();
	    }

	    function onLoop() {
	        if (loop < LOOP_TIME) {
	            restart();
	            loop++;
	        } else if (isReplay) {
	            var btn_replay = document.getElementById('btn-replay');
	            tl.to(btn_replay, 0.5, {
	                autoAlpha: 1,
	                rotation: 180
	            });
	        }
	    }

	    window.onload = init;
    </script>
</head>

<body>
    <div id="banner">
        <a class="click-tag" href="javascript:window.open(window.clickTag)" target="_blank">
            <div id="mask" class="layer"></div>
            <div id="img1" class="layer confetti"></div>
            <div id="img2" class="layer confetti"></div>
            <div id="img3" class="layer confetti"></div>
            <div id="img4" class="layer confetti"></div>
            <div id="img5" class="layer confetti"></div>
            <div id="img6" class="layer confetti"></div>
            <div id="img7" class="layer confetti"></div>
            <div id="img8" class="layer confetti"></div>
            <div id="img9" class="layer confetti"></div>
            <div id="img10" class="layer confetti"></div>
            <div id="img11" class="layer confetti"></div>
            <div id="img12" class="layer confetti"></div>
            <div id="img13" class="layer confetti"></div>
            <div id="img14" class="layer confetti"></div>
            <div id="img15" class="layer confetti"></div>
            <div id="img16" class="layer confetti"></div>
            <div id="img17" class="layer confetti"></div>
            <div id="img18" class="layer confetti"></div>
            <div id="img19" class="layer confetti"></div>
            <div id="img20" class="layer confetti"></div>
            <div id="img21" class="layer confetti"></div>
            <div id="img22" class="layer confetti"></div>
            <div id="img23" class="layer confetti"></div>
            <div id="text1" class="layer"></div>
            <div id="text2" class="layer"></div>
            <div id="text3" class="layer"></div>
            <div id="logo_dubai" class="layer"></div>
            <div id="logo" class="layer"></div>
        </a>
        <a id="btn-replay" href="javascript:" onclick="restart();"><img src="replay.png"></a>
    </div>
</body>

</html>
