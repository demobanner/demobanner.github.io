<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Banner</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.0/TweenMax.min.js"></script>
    <link rel="stylesheet" href="styles.css" />
    <script type="text/javascript">
	    var clickTag = '';

	    var tl = new TimelineLite();

	    var LOOP_TIME = 0, // how many time the banner replays
	        loop = 0,
	        isReplay = true; // show/hide replay button in the end
            images = [];

	    function init() {

            // confetti_2.style.left = '50px';
            // confetti_3.style.left = '50px';
            // confetti_4.style.left = '50px';

            tl.to(text1, 0.5, {autoAlpha: 1, ease: Power2.easeInOut});

            //for general confetti
            
            var img;
            for (i = 0; i < 23; i ++) {
                images[i] = document.getElementById('img' + (i + 1));
                images[i].style.opacity = 0;
            }

            for (i = 0; i < images.length; i ++) {
               
                tl.fromTo(images[i], Math.random() * 2 + 4, 
                    {
                        rotation: Math.random() * 360,
                        left: 728/2,
                        top: Math.random() * 90 / 2,
                        autoAlpha: 1, 
                        scale: 0
                    },
                    {   
                        autoAlpha:1, 
                        left: -Math.random() * 400 - 100,
                        top: Math.random() > 0.5 ? -Math.random() * 90 : Math.random() * 90,
                        scale: 4
                    },
                    Math.random() * 2
                );
            }  
            
            //for the red bar to stick next frame
            var confetti_4 = document.getElementById('confetti_4');
            tl.fromTo(confetti_4, Math.random() * 2 + 1, 
                {
                    rotation: Math.random() * 360,
                    left: 728/2 - 50,
                    autoAlpha: 0, 
                    top: Math.random() * 90 / 2
                },
                {   
                    autoAlpha:1, 
                    left: 0,
                    top: 0,
                    rotation: 0,
                    scale: 1
                },
                Math.random() * 2
            );

            tl.to(text1, 0.5, {autoAlpha: 0, left: -20}, '-=6');
            tl.to(text2, 0.5, {autoAlpha: 1, left: 0}, '-=5.5');
            tl.to(text2, 0.8, {autoAlpha: 0, left: 0}, '-=3');

            tl.to(redBg, 1, {autoAlpha: 1, width:728,  ease: Power0.easeInOut},'-=3')
                .to(mask, 0.5, {autoAlpha: 1, ease: Power2.easeInOut}, '-=3')
                .to(confetti_4_over, 0.5, {autoAlpha: 1, ease: Power2.easeInOut}, '-=3')
	    		.to(logo, 0.5, {autoAlpha: 1, ease: Power3.easeInOut}, '-=3')
	    		.to(text3, 0.5, {autoAlpha: 1, left:0, ease: Power2.easeInOut, onComplete:onLoop},'-=2');
            
	    }

	    function restart() {
	        tl.restart();
	    }

	    function onLoop() {
	        if (loop < LOOP_TIME) {
	            restart();
	            loop++;
	        } else if (isReplay) {
	            var btn_replay = document.getElementById('btn-replay');
	            tl.to(btn_replay, 0.5, {
	                autoAlpha: 1,
	                rotation: 180
	            });
	        }
	    }

	    window.onload = init;
    </script>
</head>

<body>
    <div id="banner">
        <a class="click-tag" href="javascript:window.open(window.clickTag)" target="_blank">
            <div id="redBg" class="layer"></div>
            <div id="mask" class="layer"></div>

            <div id="confetti_4" class="confetties"><img src="confetti_4.png"></div>


            <!--div id="frame2" class="confetties"><img src="frame2.png"></div-->
            <!--div id="confetti_1" class="confetties"><img src="confetti_1.png"></div>            
            <div id="confetti_2" class="confetties"><img src="confetti_2.png"></div>
            <div id="confetti_3" class="confetties"><img src="confetti_3.png"></div>

            <div id="f1_confetti_1" class="confetties"><img src="f1_confetti_1.png"></div>
            <div id="f1_confetti_2" class="confetties"><img src="f1_confetti_2.png"></div>
            <div id="f1_confetti_3" class="confetties"><img src="f1_confetti_3.png"></div>
            <div id="f1_confetti_4" class="confetties"><img src="f1_confetti_4.png"></div>
            <div id="f1_confetti_5" class="confetties"><img src="f1_confetti_5.png"></div-->

            <div id="img1" class="confetti"></div>
            <div id="img2" class="confetti"></div>
            <div id="img3" class="confetti"></div>
            <div id="img4" class="confetti"></div>
            <div id="img5" class="confetti"></div>
            <div id="img6" class="confetti"></div>
            <div id="img7" class="confetti"></div>
            <div id="img8" class="confetti"></div>
            <div id="img9" class="confetti"></div>
            <div id="img10" class="confetti"></div>
            <div id="img11" class="confetti"></div>
            <div id="img12" class="confetti"></div>
            <div id="img13" class="confetti"></div>
            <div id="img14" class="confetti"></div>
            <div id="img15" class="confetti"></div>
            <div id="img16" class="confetti"></div>
            <div id="img17" class="confetti"></div>
            <div id="img18" class="confetti"></div>
            <div id="img19" class="confetti"></div>
            <div id="img20" class="confetti"></div>
            <div id="img21" class="confetti"></div>
            <div id="img22" class="confetti"></div>
            <div id="img23" class="confetti"></div>


            <div id="confetti_4_over" class="layer"><img src="confetti_4_over.png"></div>
            <div id="text1" class="layer"></div>
            <div id="text2" class="layer"></div>
            <div id="text3" class="layer"></div>
            <div id="logo_dubai" class="layer"></div>
            <div id="logo" class="layer"></div>
        </a>
        <a id="btn-replay" href="javascript:" onclick="restart();"><img src="replay.png"></a>
    </div>
</body>

</html>
