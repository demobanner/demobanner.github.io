<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Banner</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.0/TweenMax.min.js"></script>
    <link rel="stylesheet" href="styles.css" />
    <script type="text/javascript">
    	var LENGTH = 10;
	    var clickTag = '';

	    var i = 0,
	    		cftArr = [],
	    		posArr = [
	    			{x:130, y:60},
	    			{x:187, y:-59},
	    			{x:94, y:-59},
	    			{x:84, y:60},
	    			{x:129, y:55},
	    			{x:208, y:27},
	    			{x:77, y:10},
	    			{x:171, y:32},
	    			{x:56, y:24},
	    			{x:98, y:12}
	    		];

	    var tl = new TimelineLite();

	    var LOOP_TIME = 0, // how many time the banner replays
	        loop = 0,
	        isReplay = true; // show/hide replay button in the end

	    function init() {

	    	for (i=0; i<LENGTH; i++) {
	    		cftArr[i] = document.getElementById('confetti_'+ (i+1));
	    		cftArr[i].style.left = posArr[i].x + 100 + 'px';
	    		cftArr[i].style.top = posArr[i].y + 'px';
	    		// cftArr[i].style.transform = "rotate(" + Math.round(Math.random()*120 - 60) + "deg)";
	    	}

	    	tl.to(text1, 0.5, {autoAlpha: 1, ease: Power2.easeInOut})
	    		.to(text1, 0.5, {autoAlpha: 0, delay: 2, ease: Power2.easeInOut})
	    		.to(text2, 0.5, {autoAlpha: 1, left: 0, ease: Power2.easeInOut});

	    	for (i=0; i<cftArr.length; i++) {
          tl.to(cftArr[i], 0.5, {autoAlpha:0.8, scale:1, left:posArr[i].x, top:posArr[i].y, ease:Power2.easeOut}, '-=0.2');
	    		tl.to(cftArr[i], 0.5, {rotation: 0, ease:Power2.easeOut}, '-=0.5');
	    	}

	    	tl.to(text2, 0.5, {autoAlpha: 0, ease: Power2.easeInOut})
	    		.to([mask,redBg], 0.5, {autoAlpha: 1, ease: Power2.easeInOut})
	    		.to(logo, 0.5, {autoAlpha: 1, ease: Power3.easeInOut})
	    		.to(text3, 0.5, {autoAlpha: 1, left:0, ease: Power2.easeInOut, onComplete:onLoop});
	    }

	    function restart() {
	        tl.restart();
	    }

	    function onLoop() {
	        if (loop < LOOP_TIME) {
	            restart();
	            loop++;
	        } else if (isReplay) {
	            var btn_replay = document.getElementById('btn-replay');
	            tl.to(btn_replay, 0.5, {
	                autoAlpha: 1,
	                rotation: 180
	            });
	        }
	    }

	    window.onload = init;
    </script>
</head>

<body>
    <div id="banner">
        <a class="click-tag" href="javascript:window.open(window.clickTag)" target="_blank">
            <div id="redBg" class="layer"></div>
            <div id="confetti_1" class="confetties"><img src="confetti_1.png"></div>
            <div id="confetti_2" class="confetties"><img src="confetti_2.png"></div>
            <div id="confetti_3" class="confetties"><img src="confetti_3.png"></div>
            <div id="confetti_4" class="confetties"><img src="confetti_4.png"></div>
            <div id="confetti_5" class="confetties"><img src="confetti_5.png"></div>
            <div id="confetti_6" class="confetties"><img src="confetti_6.png"></div>
            <div id="confetti_7" class="confetties"><img src="confetti_7.png"></div>
            <div id="confetti_8" class="confetties"><img src="confetti_8.png"></div>
            <div id="confetti_9" class="confetties"><img src="confetti_9.png"></div>
            <div id="confetti_10" class="confetties"><img src="confetti_10.png"></div>
            <div id="mask" class="layer"></div>
            <div id="text1" class="layer"></div>
            <div id="text2" class="layer"></div>
            <div id="text3" class="layer"></div>
            <div id="logo_dubai" class="layer"></div>
            <div id="logo" class="layer"></div>
        </a>
        <a id="btn-replay" href="javascript:" onclick="restart();"><img src="replay.png"></a>
    </div>
</body>

</html>
